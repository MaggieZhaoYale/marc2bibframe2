<?xml version="1.0" encoding="UTF-8"?>

<x:description xmlns:x="http://www.jenitennison.com/xslt/xspec"
               xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
               xmlns:rdfs="http://www.w3.org/2000/01/rdf-schema#"
               xmlns:marc="http://www.loc.gov/MARC21/slim"
               xmlns:bf="http://id.loc.gov/ontologies/bibframe/"
               xmlns:bflc="http://id.loc.gov/ontologies/bibframe/lc-extensions/"
               stylesheet="../xsl/marc2bibframe2.xsl"
               xslt-version="1.0">

  <x:scenario label="010 - LIBRARY OF CONGRESS CONTROL NUMBER">
    <x:context href="data/ConvSpec-010-048/marc.xml"/>
    <x:expect label="$a creates an identifiedBy/Lccn property of the Instance" test="//bf:Instance[1]/bf:identifiedBy[1]/bf:Lccn/rdf:value = '  2004436018'"/>
    <x:expect label="$z creates an Lccn with rdfs:label 'invalid'" test="//bf:Instance[1]/bf:identifiedBy[2]/bf:Lccn/rdfs:label = 'invalid'"/>
  </x:scenario>

  <x:scenario label="015 - NATIONAL BIBLIOGRAPHY NUMBER">
    <x:context href="data/ConvSpec-010-048/marc.xml"/>
    <x:expect label="$a creates an identifiedBy/Nbn property of the Instance" test="//bf:Instance[1]/bf:identifiedBy[3]/bf:Nbn/rdf:value = '06,A29,1122'"/>
    <x:expect label="$b creates a qualifier property of the Nbn" test="//bf:Instance[1]/bf:identifiedBy[3]/bf:Nbn/bf:qualifier = 'pbk'"/>
    <x:expect label="$z creates an Nbn with rdfs:label 'invalid'" test="//bf:Instance[1]/bf:identifiedBy[4]/bf:Nbn/rdfs:label = 'invalid'"/>
    <x:expect label="$2 creates a source property of the Nbn" test="//bf:Instance[1]/bf:identifiedBy[4]/bf:Nbn/bf:source/bf:Source/rdfs:label = 'dnb'"/>
  </x:scenario>

  <x:scenario label="016 - NATIONAL BIBLIOGRAPHIC AGENCY CONTROL NUMBER">
    <x:context href="data/ConvSpec-010-048/marc.xml"/>
    <x:expect label="ind1=' ' creates a LAC source property of the Nban" test="//bf:Instance[1]/bf:identifiedBy[5]/bf:Nban/bf:source/bf:Source/rdfs:label = 'Library and Archives Canada'"/>
    <x:expect label="$a creates an identifiedBy/Nban property of the Instance" test="//bf:Instance[1]/bf:identifiedBy[5]/bf:Nban/rdf:value=' 730032015  rev'"/>
    <x:expect label="$z creates an Nban with rdfs:label 'invalid'" test="//bf:Instance[1]/bf:identifiedBy[6]/bf:Nban/rdfs:label = 'invalid'"/>
    <x:expect label="$2 creates a source property of the Nban" test="//bf:Instance[1]/bf:identifiedBy[7]/bf:Nban/bf:source/bf:Source/rdfs:label = 'PoLiBN'"/>    
  </x:scenario>
  
  <x:scenario label="017 - COPYRIGHT OR LEGAL DEPOSIT NUMBER">
    <x:context href="data/ConvSpec-010-048/marc.xml"/>
    <x:expect label="$a creates an identifiedBy/CopyrightNumber property of the Instance" test="//bf:Instance[1]/bf:identifiedBy[8]/bf:CopyrightNumber/rdf:value='JP732'"/>
    <x:expect label="$b creates a source property of the CopyrightNumber" test="//bf:Instance[1]/bf:identifiedBy[8]/bf:CopyrightNumber/bf:source/bf:Source/rdfs:label = 'U.S. Copyright Office'"/>
    <x:expect label="$d creates a date property of the CopyrightNumber" test="//bf:Instance[1]/bf:identifiedBy[8]/bf:CopyrightNumber/bf:date = '1951-05-04'"/>
    <x:expect label="$i creates a note property of the CopyrightNumber" test="//bf:Instance[1]/bf:identifiedBy[8]/bf:CopyrightNumber/bf:note/bf:Note/rdfs:label = 'Suppl. reg.'"/>
    <x:expect label="$z creates a CopyrightNumber with rdfs:label 'invalid'" test="//bf:Instance[1]/bf:identifiedBy[10]/bf:CopyrightNumber/rdfs:label = 'invalid'"/>
  </x:scenario>

  <x:scenario label="020 - INTERNATIONAL STANDARD BOOK NUMBER">
    <x:context href="data/ConvSpec-010-048/marc.xml"/>
    <x:expect label="First 020/$a creates an identifiedBy/Isbn property of the Instance" test="//bf:Instance[1]/bf:identifiedBy[11]/bf:Isbn/rdf:value = '0877790086'"/>
    <x:expect label="Multiple 020s create new Instances" test="//bf:Instance[2]/bf:identifiedBy[1]/bf:Isbn/rdf:value = '0877790019'"/>
    <x:expect label="$c creates an acqusitionTerms property of the Instance" test="//bf:Instance[1]/bf:acquisitionTerms[1] = '$10.00'"/>
    <x:expect label="$q creates a qualifier property of the Isbn" test="//bf:Instance[2]/bf:identifiedBy[1]/bf:Isbn/bf:qualifier = 'black leather'"/>
    <x:expect label="$z creates an Isbn with rdfs:label 'invalid'" test="//bf:Instance[2]/bf:identifiedBy[2]/bf:Isbn/rdfs:label = 'invalid'"/>
  </x:scenario>
  
  <x:scenario label="022 - INTERNATIONAL STANDARD SERIAL NUMBER">
    <x:context href="data/ConvSpec-010-048/marc.xml"/>
    <x:expect label="$a creates an identifiedBy/Issn property of the Instance" test="//bf:Instance[1]/bf:identifiedBy[12]/bf:Issn/rdf:value = '1234-1231'"/>
    <x:expect label="$l creates an identifiedBy/IssnL property of the Work" test="//bf:Work[1]/bf:identifiedBy[1]/bf:IssnL/rdf:value = '1234-1231'"/>
    <x:expect label="$m creates an IssnL with rdfs:label 'canceled'" test="//bf:Work[1]/bf:identifiedBy[2]/bf:IssnL/rdfs:label = 'canceled'"/>
    <x:expect label="$y creates an Issn with rdfs:label 'incorrect'" test="//bf:Instance[1]/bf:identifiedBy[13]/bf:Issn/rdfs:label = 'incorrect'"/>
    <x:expect label="$z creates an Issn with rdfs:label 'canceled'" test="//bf:Instance[1]/bf:identifiedBy[14]/bf:Issn/rdfs:label = 'canceled'"/>
    <x:expect label="$2 creates a source property of the Issn" test="//bf:Instance[1]/bf:identifiedBy[12]/bf:Issn/bf:source/bf:Source/rdfs:label = 'DEU-6'"/>
  </x:scenario>
  
  <x:scenario label="024 - OTHER STANDARD IDENTIFIER">
    <x:context href="data/ConvSpec-010-048/marc.xml"/>
    <x:expect label="ind 1 determines the class of Identifier for the identifiedBy property" test="count(//bf:Instance[1]/bf:identifiedBy[15]/bf:Isrc) = 1"/>
    <x:expect label="$a creates an identifiedBy/Identifier property of the Instance" test="//bf:Instance[1]/bf:identifiedBy[15]/bf:Isrc/rdf:value = 'NLC018413261'"/>
    <x:expect label="$c creates an acquisitionTerms property of the Instance" test="//bf:Instance[1]/bf:acquisitionTerms[2] = 'EUR28.50'"/>
    <x:expect label="$d creates a note property of the Identifier" test="//bf:Instance[1]/bf:identifiedBy[18]/bf:Ean/bf:note/bf:Note/rdfs:label = '51000'"/>
    <x:expect label="$q creates a qualifier property of the Identifier" test="//bf:Instance[1]/bf:identifiedBy[17]/bf:Ismn/bf:qualifier[2] = 'sewn'"/>
    <x:expect label="$z creates an Identifier with rdfs:label 'invalid'" test="//bf:Instance[1]/bf:identifiedBy[16]/bf:Upc/rdfs:label = 'invalid'"/>
    <x:expect label="$2 creates an rdfs:label property of the Identifier" test="//bf:Instance[1]/bf:identifiedBy[20]/bf:Identifier/rdfs:label = 'istc'"/>
  </x:scenario>

  <x:scenario label="025 - OVERSEAS ACQUISITION NUMBER">
    <x:context href="data/ConvSpec-010-048/marc.xml"/>
    <x:expect label="$a creates an identifiedBy/LcOverseasAcq property of the Instance" test="//bf:Instance[1]/bf:identifiedBy[22]/bf:LcOverseasAcq/rdf:value = 'LACAP72-1719'"/>
  </x:scenario>
  
  <x:scenario label="026 - FINGERPRINT IDENTIFIER">
    <x:context href="data/ConvSpec-010-048/marc.xml"/>
    <x:expect label="$a $b $c $d create an identifiedBy/Fingerprint property of the Instance" test="//bf:Instance[1]/bf:identifiedBy[23]/bf:Fingerprint/rdf:value = 'dete nkck vess lodo 3 Anno Domini MDCXXXVI 3'"/>
    <x:expect label="$e creates an identifiedBy/Fingerprint property of the Instance" test="//bf:Instance[1]/bf:identifiedBy[24]/bf:Fingerprint/rdf:value = 'dete nkck vess lodo 3 Anno Domini MDCXXXVI 3'"/>
    <x:expect label="$2 creates a source property of the Fingerprint" test="//bf:Instance[1]/bf:identifiedBy[23]/bf:Fingerprint/bf:source/bf:Source/rdfs:label = 'fei'"/>
    <x:expect label="$5 creates a bflc:applicableInstitution property of the Fingerprint" test="//bf:Instance[1]/bf:identifiedBy[23]/bf:Fingerprint/bflc:applicableInstitution/bf:Agent/bf:code = 'UkCU'"/>
  </x:scenario>

  <x:scenario label="027 - STANDARD TECHNICAL REPORT NUMBER">
    <x:context href="data/ConvSpec-010-048/marc.xml"/>
    <x:expect label="$a creates an identifiedBy/Strn property of the Instance" test="//bf:Instance[1]/bf:identifiedBy[25]/bf:Strn/rdf:value = 'METPRO/CB/TR--74/216+PR.ENVR.WI'"/>
    <x:expect label="$z creates an Strn with rdfs:label = 'invalid'" test="//bf:Instance[1]/bf:identifiedBy[26]/bf:Strn/rdfs:label = 'invalid'"/>
  </x:scenario>

  <x:scenario label="028 - PUBLISHER NUMBER">
    <x:context href="data/ConvSpec-010-048/marc.xml"/>
    <x:expect label="ind1 determines the class of Identifier for the identifiedBy property of the Instance" test="count(//bf:Instance[1]/bf:identifiedBy[27]/bf:VideorecordingNumber) = 1"/>
    <x:expect label="$a creates an identifiedBy/Identifier property of the Instance" test="//bf:Instance[1]/bf:identifiedBy[27]/bf:VideorecordingNumber/rdf:value = '440 073 033-9'"/>
    <x:expect label="$b creates a source property of the Identifier" test="//bf:Instance[1]/bf:identifiedBy[27]/bf:VideorecordingNumber/bf:source/bf:Source/rdfs:label = 'Deutsche Grammophon'"/>
    <x:expect label="$q creates a qualifier property of the Identifier" test="//bf:Instance[1]/bf:identifiedBy[27]/bf:VideorecordingNumber/bf:qualifier = '(disc 1)'"/>
  </x:scenario>

  <x:scenario label="030 - CODEN DESIGNATION">
    <x:context href="data/ConvSpec-010-048/marc.xml"/>
    <x:expect label="$a creates an identifiedBy/Coden property of the Instance" test="//bf:Instance[1]/bf:identifiedBy[28]/bf:Coden/rdf:value = 'ASIRAF'"/>
    <x:expect label="$z creates a Coden with rdfs:label = 'invalid'" test="//bf:Instance[1]/bf:identifiedBy[29]/bf:Coden/rdfs:label = 'invalid'"/>
    <x:expect label="...and some adminMetadata on the Coden" test="//bf:Instance[1]/bf:identifiedBy[29]/bf:Coden/bf:adminMetadata/bf:AdminMetadata/bf:status/bf:Status/rdfs:label = 'invalid'"/>
  </x:scenario>
  
  <x:scenario label="032 - POSTAL REGISTRATION NUMBER">
    <x:context href="data/ConvSpec-010-048/marc.xml"/>
    <x:expect label="$a creates an identifiedBy/PostalRegistration property of the Instance" test="//bf:Instance[1]/bf:identifiedBy[30]/bf:PostalRegistration/rdf:value = '686310'"/>
    <x:expect label="$b creates a source property of the PostalRegistration" test="//bf:Instance[1]/bf:identifiedBy[30]/bf:PostalRegistration/bf:source/bf:Source/rdfs:label = 'USPS'"/>
  </x:scenario>
  
</x:description>
